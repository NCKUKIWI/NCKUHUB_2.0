var user_data={user_name:"林耿弘",user_photo:"dist/images/table/profile.png",credit_count:9,now_wishlist:[43081,4021,43021,42973,42971,42969,42968],now_table:[43084,4021,43023,43020]},vue_user_data=new Vue({el:"#user_data",data:user_data,methods:{checkValid:function(){for(var s=0;s<this.now_wishlist.length;s++)getClassObject(course_db,vue_user_data.now_wishlist[s])||this.now_wishlist.splice(s,1);for(s=0;s<this.now_table.length;s++)getClassObject(course_db,vue_user_data.now_table[s])||this.now_table.splice(s,1)},wishlistAdd:function(s){this.now_wishlist.push(s),vue_wishlist.refresh()},wishlistRemove:function(s){var t=this.now_wishlist.indexOf(s);console.log("kill wishlist: "+t),this.now_wishlist.splice(t,1),vue_wishlist.wishlist_cont.splice(t,1)},tableAdd:function(s){this.now_table.push(s),console.log(s),vue_classtable.refresh()},tableRemove:function(s){var t=vue_user_data.now_table.indexOf(s);vue_user_data.now_table.splice(t,1),vue_classtable.refresh()}}});Vue.component("wishlist-item",{data:function(){return{hover_now:!1}},props:["class_item"],template:['<div v-if="class_item.isSeen" class="list_course_item" @mouseover="mouseoverItem" @mouseout="mouseoutItem" >','<div class="list_course_item_left">','<p class="list_course_item_category text_20 text_white clickable" @click="deleteItem" :class="getClass()"> {{ class_item.category }} </p>',"</div>",'<div class="list_course_item_mid" @click="addToTable">','<p class="list_course_item_title text_16">{{ class_item.dept_id }}-{{ class_item.class_id }} {{ class_item.title }}</p>','<p class="list_course_item_description text_14 text_dark">{{ class_item.teacher }} — {{ class_item.time }}</p>',"</div>",'<div class="list_course_item_right" @click="addToTable">','<div class="list_course_item_button"></div>',"</div>","</div>"].join(""),methods:{getClass:function(){return this.class_item.dept_id},addToTable:function(){checkConflict(this.class_item,vue_classtable)&&(vue_user_data.tableAdd(this.class_item.id),vue_user_data.wishlistRemove(this.class_item.id),vue_classtable.clearFilterCell())},deleteItem:function(){console.log("wishlist killed: "+vue_wishlist.wishlist_cont.indexOf(this.class_item)+" ("+this.class_item.title+")"),vue_user_data.wishlistRemove(this.class_item.id)},mouseoverItem:function(){checkConflict(this.class_item,vue_classtable)&&vue_classtable.refresh(this.class_item.id)},mouseoutItem:function(){vue_classtable.refresh()}}});var vue_wishlist=new Vue({el:"#wishlist",data:{wishlist_cont:[],class_table_locked:!0},methods:{refresh:function(){this.wishlist_cont.length=0;for(var s=0;s<vue_user_data.now_wishlist.length;s++){var t=getClassObject(course_db,vue_user_data.now_wishlist[s]);t.isSeen=!0,this.wishlist_cont.push(t)}this.clearFilter()},clearFilter:function(){for(var s=0;s<this.wishlist_cont.length;s++)this.wishlist_cont[s].isSeen=!0},filterItemTIme:function(s,t){t=textTransTime(t);for(var e=0;e<this.wishlist_cont.length;e++){var i=getTimeObject(this.wishlist_cont[e])[0].day,l=getTimeObject(this.wishlist_cont[e])[0].start;l=textTransTime(l);var a=parseInt(l)+getTimeObject(this.wishlist_cont[e])[0].hrs-1;s==i&&t>=l&&t<=a||(this.wishlist_cont[e].isSeen=!1)}},switchLockStatus:function(){this.class_table_locked=!this.class_table_locked}}});