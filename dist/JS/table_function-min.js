function getClassObject(e,t){if(course_item=e.find(function(e){return e.id==t}),course_item){var a=course_item.選課序號;return a||(a="000"),{id:t,category:deptTransCat(course_item.系號,course_item.系所名稱),dept_id:course_item.系號,class_id:a,title:course_item.課程名稱,teacher:course_item.老師,time:course_item.時間,credit:course_item.學分}}return 0}function getTimeObject(e){for(var t=/\[[0-9]\][a-zA-Z0-9]~[a-zA-Z0-9]/,a=/\[[0-9]\][a-zA-Z0-9]/,r=/\[[0-9]\]/,s=/[a-zA-Z0-9]/,c=e.time.toString();c.match(" ");)c=c.replace(" ","");if(c.match(/[\u4e00-\u9fa5]/g))return console.log("getTime: 出現中文 "),0;if(!c.match(a))return console.log("getTime: 無效的時間 "),0;for(var i,n,u,o,m=[];""!=c;)c.match(t)?(result=c.match(t),c=c.replace(result[0],""),m.push(result[0])):c.match(a)&&(result=c.match(a),c=c.replace(result[0],""),m.push(result[0]));for(var f=[],l=0;l<m.length;l++)i=m[l].match(r).toString().match(s),(n=m[l].replace("["+i+"]","")).toString().match("~")?(u=n[0],o=textTransTime(n[2])-textTransTime(u)+1):(u=n[0],o=1),i=dayTransText(i),f.push({day:i,start:u,hrs:o});return f}function checkConflict(e,t){for(var a,r,s,c=getTimeObject(e),i=0;i<c.length;i++){a=c[i].day,r=c[i].start,s=c[i].hrs;for(var n=0;n<s;n++){var u=t[a].find(function(e){return e.time==timeTransText(textTransTime(r)+n)});if(0!=u.status)return u.class_item.id==e.id?u.ifPreview?1:0:(console.log("checkConflict: 找到衝堂"),u.cell_status_title="時段衝堂",u.ifRush=!0,0)}}return 1}function textTransTime(e){var t;if(e>0&&e<=4)t=parseInt(e);else if(e>=5&&e<=9)t=parseInt(e)+1;else switch(e){case"N":t=5;break;case"A":t=11;break;case"B":t=12;break;case"C":t=13;break;case"D":t=14;break;default:t="other_time"}return t}function timeTransText(e){var t;if(e>0&&e<=4)t=parseInt(e);else if(e>=6&&e<=10)t=parseInt(e)-1;else switch(parseInt(e)){case 5:t="N";break;case 11:t="A";break;case 12:t="B";break;case 13:t="C";break;case 14:t="D";break;default:t="other_time"}return t}function dayTransText(e){var t;switch(parseInt(e)){case 1:t="monday";break;case 2:t="tuesday";break;case 3:t="wednesday";break;case 4:t="thursday";break;case 5:t="friday";break;default:t="other_day"}return t}function textTransDay(e){var t;switch(e){case"monday":t=1;break;case"tuesday":t=2;break;case"wednesday":t=3;break;case"thursday":t=4;break;case"friday":t=5;break;default:t="other_day"}return t}function deptTransCat(e,t){var a;switch(e){case"A9":a="通";break;case"A6":a="服";break;case"A7":a="國";break;case"A1":a="外";break;case"A2":a="體";break;default:a=t.substring(0,1)}return a}